<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Scala,Spark">
<meta property="og:type" content="website">
<meta property="og:title" content="GBW's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="GBW's Blog">
<meta property="og:description" content="Scala,Spark">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="GBW's Blog">
<meta name="twitter:description" content="Scala,Spark">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> GBW's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">GBW's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Write 1000 Lines a Day to Change My Life!  ٩( 'ω' )و</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-books">
          <a href="/books" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            书单
          </a>
        </li>
      
        
        <li class="menu-item menu-item-reviews">
          <a href="/reviews" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            评测
          </a>
        </li>
      
        
        <li class="menu-item menu-item-bodybuilding">
          <a href="/bodybuilding" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            健身
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/08/准备去参加的校招笔试/" itemprop="url">
                  准备去参加的校招笔试
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-08T11:31:37+08:00" content="2016-10-08">
              2016-10-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="蜻蜓FM"><a href="#蜻蜓FM" class="headerlink" title="蜻蜓FM"></a>蜻蜓FM</h2><p>2016-10-10 周一 14:00<br>浙江大学玉泉校区曹光彪东楼502室<br>【笔试】<br>1、宣讲结束直接笔试<br>2、11日上午09:30-曹光彪东楼502<br>研发大神（iOS、Android、前端、后台、算法）：月薪17k-20k</p>
<h2 id="北京昆仑万维科技股份有限公司"><a href="#北京昆仑万维科技股份有限公司" class="headerlink" title="北京昆仑万维科技股份有限公司"></a>北京昆仑万维科技股份有限公司</h2><p>时间: 2016-10-11 13:30<br>地点: 玉泉永谦活动中心第一报告厅</p>
<h2 id="拼多多"><a href="#拼多多" class="headerlink" title="拼多多"></a>拼多多</h2><p>时间：10月12日 19：00<br>地点：浙江大学玉泉永谦活动中心二楼排练厅<br>（报名，暂没有具体笔试通知）</p>
<h2 id="经纬联合"><a href="#经纬联合" class="headerlink" title="经纬联合"></a>经纬联合</h2><p>宣讲时间：10月12日晚6点入场，非技术岗位可现场投递简历，霸面；技术岗需提前网申，现场笔试.<br>宣讲地点：浙江大学 玉泉校区 周亦卿楼一楼报告厅</p>
<h2 id="杭州安脉盛智能技术有限公司全职-amp-实习宣讲会"><a href="#杭州安脉盛智能技术有限公司全职-amp-实习宣讲会" class="headerlink" title="杭州安脉盛智能技术有限公司全职&amp;实习宣讲会"></a>杭州安脉盛智能技术有限公司全职&amp;实习宣讲会</h2><p>时间：2016年10月13日下午13:30<br>地点：玉泉永谦活动中心B111职业生涯辅导室<br>（报名，暂没有具体笔试通知）</p>
<h2 id="尼毕鲁tap4fun2017届校园招聘"><a href="#尼毕鲁tap4fun2017届校园招聘" class="headerlink" title="尼毕鲁tap4fun2017届校园招聘"></a>尼毕鲁tap4fun2017届校园招聘</h2><p> 时间:     2016-10-14 10:00<br> 地点:     玉泉永谦活动中心第一报告厅<br>请在参加宣讲会之前通过微信公众号『Tap4fun尼毕鲁』完成线上测试！<br>12w-17w</p>
<h2 id="七牛云"><a href="#七牛云" class="headerlink" title="七牛云"></a>七牛云</h2><p>10月15日 15:00<br>（报名，暂没有具体笔试通知）</p>
<h2 id="ebay"><a href="#ebay" class="headerlink" title="ebay"></a>ebay</h2><p>【地点】 浙大玉泉校区曹光彪东楼502室<br>【时间】 10/18 18:00 PM - 21：00 PM<br>【宣讲会日程】<br>18：00 pm - 18：30 pm 酷炫的VR shopping 展示<br>18：30 pm - 19：30 pm 宣讲会<br>20：00 pm - 21：00 pm 笔试</p>
<h2 id="咪咕"><a href="#咪咕" class="headerlink" title="咪咕"></a>咪咕</h2><p>报名编号为113311</p>
<h2 id="魅族科技"><a href="#魅族科技" class="headerlink" title="魅族科技"></a>魅族科技</h2><p>简历编号为 C00026838 </p>
<h2 id="拍拍贷"><a href="#拍拍贷" class="headerlink" title="拍拍贷"></a>拍拍贷</h2><p>需要网上测评<br>拍拍贷请您参加智鼎在线测评，请务必准时参加。</p>
<p>登录网址：<a href="https://open.51job.com/api/exam/login/exam_login.aspx?test_token=1b3fb18d-30e0-4760-a4c5-326b61aa002c&amp;exam_type=zhiding" target="_blank" rel="external">https://open.51job.com/api/exam/login/exam_login.aspx?test_token=1b3fb18d-30e0-4760-a4c5-326b61aa002c&amp;exam_type=zhiding</a></p>
<p>为了保证您的测评能够顺利进行，请认真阅读以下内容：</p>
<p>1.电脑及网络条件（非常重要）：</p>
<p>①操作系统：Windows</p>
<p>②浏览器：IE7及以上、Chrome、火狐（如要求进行摄像头监控，必须是火狐浏览器）</p>
<p>③带宽：2M或以上</p>
<p>（注：如果网络及电脑条件不能满足以上要求，请务必找到符合要求的电脑或机房。否则您将无法正常登录测评页面或顺利完成测评，您的答案也将无法保存。）</p>
<p>④您登录测评系统后，如系统提示需要启用摄像头，对您的作答过程进行监测。请选择一台摄像头设备正常的电脑作答，并允许系统使用。（如无，请忽略）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/08/十一面试情况/" itemprop="url">
                  十一面试情况
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-08T11:31:19+08:00" content="2016-10-08">
              2016-10-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>十一期间，一共4家公司发来了面试邀请。<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/10/08/十一面试情况/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/08/蛋疼的海投/" itemprop="url">
                  蛋疼的海投
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-08T11:23:22+08:00" content="2016-10-08">
              2016-10-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>还是太年轻，找工作找晚了，十一期间把能投的都投了<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/10/08/蛋疼的海投/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/28/9-28需求整理/" itemprop="url">
                  9.28需求整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-28T21:58:56+08:00" content="2016-09-28">
              2016-09-28
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在2D slice上叠加SWC显示，已知原始图像和它对应的swc文件，在前端把对应的点在原始图像上面标记出来，使用原来的leaflet显示。</p>
<p>NeuTube中运行结果<br><img src="http://oa4pac8sx.bkt.clouddn.com/swc.png" alt="enter image description here"></p>
<p>参考：<br>1.Neutube的zswctree.cpp里的ZSwcTree::display函数<br><a href="https://github.com/janelia-flyem/NeuTu/blob/public/neurolabi/gui/zswctree.cpp" target="_blank" rel="external">https://github.com/janelia-flyem/NeuTu/blob/public/neurolabi/gui/zswctree.cpp</a><br>2.SharkView在前端显示swc文件，但他是三位显示，我们要显示二维图像<br><a href="https://github.com/JaneliaSciComp/SharkViewer" target="_blank" rel="external">https://github.com/JaneliaSciComp/SharkViewer</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/25/google架构/" itemprop="url">
                  google架构
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-25T17:51:36+08:00" content="2016-09-25">
              2016-09-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Google是伸缩性的王者。Google一直的目标就是构建高性能高伸缩性的基础组织来支持它们的产品。</p>
<p>平台<br>Linux<br>大量语言：Python，Java，C++</p>
<p>状态<br>在2006年大约有450,000台廉价服务器<br>在2005年Google索引了80亿Web页面，现在没有人知道数目<br>目前在Google有超过200个GFS集群。一个集群可以有1000或者甚至5000台机器。成千上万的机器从运行着5000000000000000字节存储的GFS集群获取数据，集群总的读写吞吐量可以达到每秒40兆字节<br>目前在Google有6000个MapReduce程序，而且每个月都写成百个新程序<br>BigTable伸缩存储几十亿的URL，几百千千兆的卫星图片和几亿用户的参数选择</p>
<p>堆栈<br>Google形象化它们的基础组织为三层架构：<br>1，产品：搜索，广告，email，地图，视频，聊天，博客<br>2，分布式系统基础组织：GFS，MapReduce和BigTable<br>3，计算平台：一群不同的数据中心里的机器<br>4，确保公司里的人们部署起来开销很小<br>5，花费更多的钱在避免丢失日志数据的硬件上，其他类型的数据则花费较少</p>
<p>可信赖的存储机制GFS(Google File System)<br>1，可信赖的伸缩性存储是任何程序的核心需求。GFS就是Google的核心存储平台<br>2，Google File System - 大型分布式结构化日志文件系统，Google在里面扔了大量的数据<br>3，为什么构建GFS而不是利用已有的东西？因为可以自己控制一切并且这个平台与别的不一样，Google需要：<br>-跨数据中心的高可靠性<br>-成千上万的网络节点的伸缩性<br>-大读写带宽的需求<br>-支持大块的数据，可能为上千兆字节<br>-高效的跨节点操作分发来减少瓶颈<br>4，系统有Master和Chunk服务器<br>-Master服务器在不同的数据文件里保持元数据。数据以64MB为单位存储在文件系统中。客户端与Master服务器交流来在文件上做元数据操作并且找到包含用户需要数据的那些Chunk服务器<br>-Chunk服务器在硬盘上存储实际数据。每个Chunk服务器跨越3个不同的Chunk服务器备份以创建冗余来避免服务器崩溃。一旦被Master服务器指明，客户端程序就会直接从Chunk服务器读取文件<br>6，一个上线的新程序可以使用已有的GFS集群或者可以制作自己的GFS集群<br>7，关键点在于有足够的基础组织来让人们对自己的程序有所选择，GFS可以调整来适应个别程序的需求</p>
<p>使用MapReduce来处理数据<br>1，现在你已经有了一个很好的存储系统，你该怎样处理如此多的数据呢？比如你有许多TB的数据存储在1000台机器上。数据库不能伸缩或者伸缩到这种级别花费极大，这就是MapReduce出现的原因<br>2，MapReduce是一个处理和生成大量数据集的编程模型和相关实现。用户指定一个map方法来处理一个键/值对来生成一个中间的键/值对，还有一个reduce方法来合并所有关联到同样的中间键的中间值。许多真实世界的任务都可以使用这种模型来表现。以这种风格来写的程序会自动并行的在一个大量机器的集群里运行。运行时系统照顾输入数据划分、程序在机器集之间执行的调度、机器失败处理和必需的内部机器交流等细节。这允许程序员没有多少并行和分布式系统的经验就可以很容易使用一个大型分布式系统资源<br>3，为什么使用MapReduce？<br>-跨越大量机器分割任务的好方式<br>-处理机器失败<br>-可以与不同类型的程序工作，例如搜索和广告。几乎任何程序都有map和reduce类型的操作。你可以预先计算有用的数据、查询字数统计、对TB的数据排序等等<br>4，MapReduce系统有三种不同类型的服务器<br>-Master服务器分配用户任务到Map和Reduce服务器。它也跟踪任务的状态<br>-Map服务器接收用户输入并在其基础上处理map操作。结果写入中间文件<br>-Reduce服务器接收Map服务器产生的中间文件并在其基础上处理reduce操作<br>5，例如，你想在所有Web页面里的字数。你将存储在GFS里的所有页面抛入MapReduce。这将在成千上万台机器上同时进行并且所有的调整、工作调度、失败处理和数据传输将自动完成<br>-步骤类似于：GFS -&gt; Map -&gt; Shuffle -&gt; Reduction -&gt; Store Results back into GFS<br>-在MapReduce里一个map操作将一些数据映射到另一个中，产生一个键值对，在我们的例子里就是字和字数<br>-Shuffling操作聚集键类型<br>-Reduction操作计算所有键值对的综合并产生最终的结果<br>6，Google索引操作管道有大约20个不同的map和reduction。<br>7，程序可以非常小，如20到50行代码<br>8，一个问题是掉队者。掉队者是一个比其他程序慢的计算，它阻塞了其他程序。掉队者可能因为缓慢的IO或者临时的CPU不能使用而发生。解决方案是运行多个同样的计算并且当一个完成后杀死所有其他的<br>9，数据在Map和Reduce服务器之间传输时被压缩了。这可以节省带宽和I/O。</p>
<p>在BigTable里存储结构化数据<br>1，BigTable是一个大伸缩性、错误容忍、自管理的系统，它包含千千兆的内存和1000000000000000的存储。它可以每秒钟处理百万的读写<br>2，BigTable是一个构建于GFS之上的分布式哈希机制。它不是关系型数据库。它不支持join或者SQL类型查询<br>3，它提供查询机制来通过键访问结构化数据。GFS存储存储不透明的数据而许多程序需求有结构化数据<br>4，商业数据库不能达到这种级别的伸缩性并且不能在成千上万台机器上工作<br>5，通过控制它们自己的低级存储系统Google得到更多的控制权来改进它们的系统。例如，如果它们想让跨数据中心的操作更简单这个特性，它们可以内建它<br>6，系统运行时机器可以自由的增删而整个系统保持工作<br>7，每个数据条目存储在一个格子里，它可以通过一个行key和列key或者时间戳来访问<br>8，每一行存储在一个或多个tablet中。一个tablet是一个64KB块的数据序列并且格式为SSTable<br>9，BigTable有三种类型的服务器：<br>-Master服务器分配tablet服务器，它跟踪tablet在哪里并且如果需要则重新分配任务<br>-Tablet服务器为tablet处理读写请求。当tablet超过大小限制(通常是100MB-200MB)时它们拆开tablet。当一个Tablet服务器失败时，则100个Tablet服务器各自挑选一个新的tablet然后系统恢复。<br>-Lock服务器形成一个分布式锁服务。像打开一个tablet来写、Master调整和访问控制检查等都需要互斥<br>10，一个locality组可以用来在物理上将相关的数据存储在一起来得到更好的locality选择<br>11，tablet尽可能的缓存在RAM里</p>
<p>硬件<br>1，当你有很多机器时你怎样组织它们来使得使用和花费有效？<br>2，使用非常廉价的硬件<br>3，A 1,000-fold computer power increase can be had for a 33 times lower cost if you you use a failure-prone infrastructure rather than an infrastructure built on highly reliable components. You must build reliability on top of unreliability for this strategy to work.<br>4，Linux，in-house rack design，PC主板，低端存储<br>5，Price per wattage on performance basis isn’t getting better. Have huge power and cooling issues<br>6，使用一些collocation和Google自己的数据中心</p>
<p>其他<br>1，迅速更改而不是等待QA<br>2，库是构建程序的卓越方式<br>3，一些程序作为服务提供<br>4，一个基础组织处理程序的版本，这样它们可以发布而不用害怕会破坏什么东西</p>
<p>Google将来的方向<br>1，支持地理位置分布的集群<br>2，为所有数据创建一个单独的全局名字空间。当前的数据由集群分离<br>3，更多和更好的自动化数据迁移和计算<br>4，解决当使用网络划分来做广阔区域的备份时的一致性问题(例如保持服务即使一个集群离线维护或由于一些损耗问题)</p>
<p>学到的东西<br>1，基础组织是有竞争性的优势。特别是对Google而言。Google可以很快很廉价的推出新服务，并且伸缩性其他人很难达到。许多公司采取完全不同的方式。许多公司认为基础组织开销太大。Google认为自己是一个系统工程公司，这是一个新的看待软件构建的方式<br>2，跨越多个数据中心仍然是一个未解决的问题。大部分网站都是一个或者最多两个数据中心。我们不得不承认怎样在一些数据中心之间完整的分布网站是很需要技巧的<br>3，如果你自己没有时间从零开始重新构建所有这些基础组织你可以看看Hadoop。Hadoop是这里很多同样的主意的一个开源实现<br>4，平台的一个优点是初级开发人员可以在平台的基础上快速并且放心的创建健全的程序。如果每个项目都需要发明同样的分布式基础组织的轮子，那么你将陷入困境因为知道怎样完成这项工作的人相对较少<br>5，协同工作不一直是掷骰子。通过让系统中的所有部分一起工作则一个部分的改进将帮助所有的部分。改进文件系统则每个人从中受益而且是透明的。如果每个项目使用不同的文件系统则在整个堆栈中享受不到持续增加的改进<br>6，构建自管理系统让你没必要让系统关机。这允许你更容易在服务器之间平衡资源、动态添加更大的容量、让机器离线和优雅的处理升级<br>7，创建可进化的基础组织，并行的执行消耗时间的操作并采取较好的方案<br>8，不要忽略学院。学院有许多没有转变为产品的好主意。Most of what Google has done has prior art, just not prior large scale deployment.<br>9，考虑压缩。当你有许多CPU而IO有限时压缩是一个好的选择。 </p>
<p>原文：<a href="http://highscalability.com/google-architecture/" target="_blank" rel="external">http://highscalability.com/google-architecture/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/25/图片服务器架构演进/" itemprop="url">
                  图片服务器架构演进
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-25T14:47:50+08:00" content="2016-09-25">
              2016-09-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="单机时代"><a href="#单机时代" class="headerlink" title="单机时代"></a>单机时代</h1><p>初创时期由于时间紧迫，开发人员水平也很有限等原因。所以通常就直接在website文件所在的目录下，建立1个upload子目录，用于保存用户上传的图片文件。如果按业务再细分，可以在upload目录下再建立不同的子目录来区分。例如：upload\xx_upload\1等。<br>在数据库表中保存的也是”upload/xx/1.jpg”这类相对路径。<br>用户的访问方式如下：<br><a href="http://www.yourdomain.com/upload/xx/1.jpg" target="_blank" rel="external">http://www.yourdomain.com/upload/xx/1.jpg</a><br>针对上述最原始的架构，主要面临着如下问题：</p>
<ol>
<li>随着upload目录中文件越来越多，所在分区（例如D盘）如果出现容量不足，则很难扩容。只能停机后更换更大容量的存储设备，再将旧数据导入。</li>
<li>在部署新版本（部署新版本前通过需要备份）和日常备份website文件的时候，需要同时操作upload目录中的文件，如果考虑到访问量上升，后边部署由多台Web服务器组成的负载均衡集群，集群节点之间如果做好文件实时同步将是个难题。</li>
</ol>
<h1 id="集群时代"><a href="#集群时代" class="headerlink" title="集群时代"></a>集群时代</h1><h2 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h2><p><img src="http://oa4pac8sx.bkt.clouddn.com/fuwuqi1.png" alt="enter image description here"><br>如果不想在每台图片服务器同步所有图片，那么NFS是最简单的文件共享方式。NFS是个分布式的客户机/服务器文件系统，NFS的实质在于用户间计算机的共享，用户可以联结到共享计算机并象访问本地硬盘一样访问共享计算机上的文件。具体实现思路是：<br>1）所有前端web服务器都通过nfs挂载3台图片服务器export出来的目录，以接收web服务器写入的图片。然后[图片1]服务器挂载另外两台图片服务器的export目录到本地给apache对外提供访问。<br>2）用户上传图片<br>用户通过Internet访问页面提交上传请求post到web服务器，web服务器处理完图片后由web服务器拷贝到对应的mount本地目录。<br>3）用户访问图片<br>用户访问图片时，通过[图片1]这台图片服务器来读取相应mount目录里边的图片。<br>以上架构存在的问题：<br>1）性能：现有结构过度依赖nfs,当图片服务器的nfs服务器有问题时，可能影响到前端web服务器。NFS的问题主要是锁的问题. 很容易造成死锁, 只有硬件重启才能解决。尤其当图片达到一定的量级后，nfs会有严重的性能问题。<br>2）高可用：对外提供下载的图片服务器只有一台，容易出现单点故障。<br>3） 扩展性：图片服务器之间的依赖过多，而且横向扩展余地不够。<br>4） 存储：web服务器上传热点不可控，造成现有图片服务器空间占用不均衡。<br>5） 安全性：nfs方式对于拥有web服务器的密码的人来说，可以随意修改nfs里边的内容，安全级别不高。<br>当然图片服务器的图片同步可以不采用NFS,也可以采用ftp或rsync，采用ftp这样的话每个图片服务器就都保存一份图片的副本，也起到了备份的作用。但是缺点是将图片ftp到服务器比较耗时，如果使用异步方式去同步图片的话又会有延时，不过一般的小图片文件也还好了。使用rsync同步，当数据文件达到一定的量级后，每次rsync扫描会耗时很久也会带来一定的延时性。</p>
<h2 id="发展阶段"><a href="#发展阶段" class="headerlink" title="发展阶段"></a>发展阶段</h2><p><img src="http://oa4pac8sx.bkt.clouddn.com/fuwuqi2.png" alt="enter image description here"><br>于是出现了上图图片服务器架构，出现了分布式的图片存储。<br>其实现的具体思路如下：<br>1）用户上传图片到web服务器后，web服务器处理完图片，然后再由前端web服务器把图片post到到[图片1]、[图片2]…[图片N]其中的一个，图片服务器接收到post过来的图片，然后把图片写入到本地磁盘并返回对应成功状态码。前端web服务器根据返回状态码决定对应操作，如果成功的话，处理生成各尺寸的缩略图、打水印，把图片服务器对应的ID和对应图片路径写入DB数据库。<br>2) 上传控制<br>我们需要调节上传时，只需要修改web服务器post到的目的图片服务器的ID，就可以控制上传到哪台图片存储服务器,对应的图片存储服务器只需要安装nginx同时提供一个python或者php服务接收并保存图片，如果不想不想开启python或者php服务，也可以编写一个nginx扩展模块。<br>3) 用户访问流程<br>用户访问页面的时候，根据请求图片的URL到对应图片服务器去访问图片。<br>如： <a href="http://www.yourdomain.com/image1.jpg" target="_blank" rel="external">http://www.yourdomain.com/image1.jpg</a></p>
<p>此阶段的图片服务器架构，增加了负载均衡和分布式图片存储，能够在一定程度上解决并发访问量高和存储量大的问题。<br>以上图片服务架构设计消除了早期的NFS依赖以及单点问题，时能够均衡图片服务器的空间，提高了图片服务器的安全性等问题，但是又带来一个问题是图片服务器的横向扩展冗余问题。只想在普通的硬盘上存储，首先还是要考虑一下物理硬盘的实际处理能力。是 7200 转的还是 15000 转的，实际表现差别就很大。至于文件系统选择xfs、ext3、ext4还是reiserFs，需要做一些性能方面的测试，从官方的一些测试数据来看，reiserFs更适合存储一些小图片文件。创建文件系统的时候 Inode 问题也要加以考虑，选择合适大小的 inode size ，因为Linux 为每个文件分配一个称为索引节点的号码inode，可以将inode简单理解成一个指针，它永远指向本文件的具体存储位置。一个文件系统允许的inode节点数是有限的，如果文件数量太多，即使每个文件都是0字节的空文件，系统最终也会因为节点空间耗尽而不能再创建文件，因此需要在空间和速度上做取舍，构造合理的文件目录索引。</p>
<h1 id="云存储阶段"><a href="#云存储阶段" class="headerlink" title="云存储阶段"></a>云存储阶段</h1><p><img src="http://oa4pac8sx.bkt.clouddn.com/fuwuqi3.png" alt="enter image description here"><br>图片服务早已成为一个互联网应用中占比很大的部分，对图片的处理能力也相应地变成企业和开发者的一项基本技能,图片的下载和上传速度显得更加重要，要想处理好图片，需要面对的三个主要问题是：大流量、高并发、海量存储。<br>阿里云存储服务(OpenStorageService，简称OSS)，是阿里云对外提供的海量，安全，低成本，高可靠的云存储服务。用户可以通过简单的 REST接口，在任何时间、任何地点上传和下载数据，也可以使用WEB页面对数据进行管理。同时，OSS提供Java、Python、PHP SDK，简化用户的编程。基于OSS，用户可以搭建出各种多媒体分享网站、网盘、个人企业数据备份等基于大规模数据的服务。在以下图片云存储主要以阿里云的云存储OSS为切入点介绍，下图为OSS云存储的简单架构示意图。<br><img src="http://oa4pac8sx.bkt.clouddn.com/oss.png" alt="enter image description here"><br>真正意义上的“云存储”，不是存储而是提供云服务，使用云存储服务的主要优势有以下几点：<br>1)用户无需了解存储设备的类型、接口、存储介质等。<br>2)无需关心数据的存储路径。<br>3)无需对存储设备进行管理、维护。<br>4)无需考虑数据备份和容灾<br>5)简单接入云存储，尽情享受存储服务。</p>
<h1 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h1><p>大流量、高并发、海量存储</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="独立图片服务器"><a href="#独立图片服务器" class="headerlink" title="独立图片服务器"></a>独立图片服务器</h2><p>对于图片服务器来说IO无疑是消耗资源最为严重的，对于web应用来说需要将图片服务器做一定的分离，否则很可能因为图片服务器的IO负载导致应用崩溃。因此尤其对于大型网站和应用来说，非常有必要将图片服务器和应用服务器分离，构建独立的图片服务器集群。<br>Box.net非常受欢迎，国内的云存储目前比较不错的主要有七牛云存储和又拍云存储。</p>
<h2 id="上传下载分而治之"><a href="#上传下载分而治之" class="headerlink" title="上传下载分而治之"></a>上传下载分而治之</h2><p>图片服务器的图片下载比例远远高于上传比例，业务逻辑的处理也区别明显，上传服器对图片重命名，记录入库信息，下载服务器对图片添加水印、修改尺寸之类的动态处理。从高可用的角度，我们能容忍部分图片下载失败，但绝不能有图片上传失败，因为上传失败，意味着数据的丢失。上传与下载分开，能保证不会因下载的压力影响图片的上传，而且还有一点，下载入口和上传入口的负载均衡策略也有所不同。上传需要经过Quota Server记录用户和图片的关系等逻辑处理，下载的逻辑处理如果绕过了前端缓存处理，穿透后端业务逻辑处理，需要从OSS获取图片路径信息。近期阿里云会推出基于CDN就近上传的功能，自动选择离用户最近的CDN节点，使得数据的上传下载速度均得到最优化。相较传统IDC，访问速度提升数倍。</p>
<h2 id="分布式文件系统"><a href="#分布式文件系统" class="headerlink" title="分布式文件系统"></a>分布式文件系统</h2><p>用分布式存储有几个好处，分布式能自动提供冗余，不需要我们去备份，担心数据安全，在文件数量特别大的情况下，备份是一件很痛苦的事情，rsync扫一次可能是就是好几个小时，还有一点就是分布式存储动态扩容方便。当然在国内的其他一些文件系统里，TFS（<a href="http://code.taobao.org/p/tfs/src/）和FASTDFS也有一些用户，但是TFS的优势更是针对一些小文件存储，主要是淘宝在用。另外FASTDFS在并发高于300写入的情况下出现性能问题，稳定性不够友好。阿里云存储使用的是阿里云基于飞天5k平台自主研发的高可用，高可靠的分布式文件系统盘古。" target="_blank" rel="external">http://code.taobao.org/p/tfs/src/）和FASTDFS也有一些用户，但是TFS的优势更是针对一些小文件存储，主要是淘宝在用。另外FASTDFS在并发高于300写入的情况下出现性能问题，稳定性不够友好。阿里云存储使用的是阿里云基于飞天5k平台自主研发的高可用，高可靠的分布式文件系统盘古。</a><br>分布式文件系统盘古和Google的GFS类似，盘古的架构是Master-Slave主从架构，Master负责元数据管理，Sliave叫做Chunk Server，负责读写请求。其中Master是基于Paxos的多Master架构，一个Master死了之后，另外一个Master可以很快接过去，基本能够做到故障恢复在一分钟以内 。文件是按照分片存放，每个会分三个副本，放在不同的机架上，最后提供端到端的数据校验。</p>
<h2 id="HAPROXY负载均衡"><a href="#HAPROXY负载均衡" class="headerlink" title="HAPROXY负载均衡"></a>HAPROXY负载均衡</h2><p>基于haproxy的自动hash架构 ,这是一种新的缓存架构，由nginx作为最前端，代理到缓存机器。 nginx后面是缓存组，由nginx经过url hash后将请求分到缓存机器。<br>这个架构方便纯squid缓存升级，可以在squid的机器上加装nginx。 nginx有缓存的功能，可以将一些访问量特大的链接直接缓存在nginx上，就不用经过多一次代理的请求，能够保证图片服务器的高可用、高性能。比如favicon.ico和网站的logo。 负载均衡负责OSS所有的请求的负载均衡，后台的http服务器故障会自动切换，从而保证了OSS的服务不间断。</p>
<h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>阿里云CDN服务是一个遍布全国的分布式缓存系统，能够将网站文件（如图片或JavaScript代码文件）缓存到全国多个城市机房中的服务器上，当一个用户访问你的网站时，会就近到靠近TA的城市的服务器上获取数据，这样最终用户访问你的服务速度会非常快。<br>阿里云CDN服务在全国部署超过100个节点，能提供给用户优良的网络加速效果。当网站业务突然爆发增长时，无需手忙脚乱地扩容网络带宽，使用CDN服务即可轻松应对。和OSS服务一样，使用CDN，需要先在aliyun.com网站上开通CDN服务。开通后，需要在网站上的管理中心创建你的distribution（即分发频道），每个distribution由两个必须的部分组成：distribution ID和源站地址。<br>使用阿里云OSS和CDN可以非常方便的针对每个bucket进行内容加速，因为每个bucket对应一个独立的二级域名，针对每个文件进行CDN删除，简单、经济地解决服务的存储和网络问题，毕竟大多数网站或应用的存储和网络带宽多半是被图片或视频消耗掉的。<br>从整个业界来看，最近这样的面向个人用户的云存储如国外的DropBox和</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/24/9-23架构讨论/" itemprop="url">
                  9.23架构讨论
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-24T08:07:17+08:00" content="2016-09-24">
              2016-09-24
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oa4pac8sx.bkt.clouddn.com/9.23%E6%9E%B6%E6%9E%84%E5%88%9D%E6%8E%A2.png" alt="enter image description here"></p>
<h2 id="需要解决的问题"><a href="#需要解决的问题" class="headerlink" title="需要解决的问题"></a>需要解决的问题</h2><p>1.客户端服务具体内容<br>2.DVID分布式布置<br>3.Neutube分布式实现</p>
<h2 id="调研内容"><a href="#调研内容" class="headerlink" title="调研内容"></a>调研内容</h2><p>1.leveldb 好处<br>2.Google Map 架构<br>3.图片服务器历史，现状，挑战，解决方案<br>4.ImageJ</p>
<h2 id="大致方向"><a href="#大致方向" class="headerlink" title="大致方向"></a>大致方向</h2><p>1.Neutube的分布式实现<br>2.赵老师培训及实现<br>3.整个系统实现</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/23/9-23框架讨论我的想法/" itemprop="url">
                  9.23框架讨论我的想法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-23T14:17:38+08:00" content="2016-09-23">
              2016-09-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="分布式客户端-服务器的应用程序"><a href="#分布式客户端-服务器的应用程序" class="headerlink" title="分布式客户端-服务器的应用程序"></a>分布式客户端-服务器的应用程序</h2><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>前端运行在浏览器中，使用react框架，主要由JS编写。使用HTML模板，大部分由JS动态生成。显示图像使用Leaflet这一开源的JS图片库，支持绘制矢量图层，与DVID的http api交互。提供后台计算模块的接口，用于神经元结构重建。在客户端支持矢量编辑，用于手动修正模型。</p>
<h2 id="后端DVID"><a href="#后端DVID" class="headerlink" title="后端DVID"></a>后端DVID</h2><p>目前图片保存在leveldb中，但是鉴于图片规模，数据库承载太多图片可能会导致数据库容量和效率成为极大的瓶颈。<br>图片数据保存至硬盘（HDFS）<br>数据库中保存图片的存储路径，ID（HBase）</p>
<h2 id="计算模块"><a href="#计算模块" class="headerlink" title="计算模块"></a>计算模块</h2><p>Spark集群，基于Neutube的计算服务系统支持自动分配计算资源对图像数据进行自动重建，产生神经元模型。</p>
<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>图片写请求由用户发起后，首先来到应用服务器排队等待进入HDFS存储系统，通过NameNode分配DataNode进行存储，图片写入过程中先确定写入Block，再确定Sequence File，系统将二者的ID组合命名为图片的系统内的名称。图片名,URL保存在HBase中。</p>
<h2 id="访问，下载"><a href="#访问，下载" class="headerlink" title="访问，下载"></a>访问，下载</h2><p>用户访问的时候根据请求图片的URL找到图片在hdfs中的位置。</p>
<h2 id="其他想法"><a href="#其他想法" class="headerlink" title="其他想法"></a>其他想法</h2><ol>
<li>可以使用云存储的方案，既能解决各类存储、扩展、备灾的问题，又能做好CDN加速。</li>
<li>缓存服务器：通过Nginx的Redis模块直接读取，通过调用Redis的API对数据进行写入。</li>
<li>负载均衡：HAproxy采用RoundRobin负载均衡算法，分载前端用户请求的压力到每个web图片服务器上。 </li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/22/近期资料整理/" itemprop="url">
                  近期资料整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-22T07:55:01+08:00" content="2016-09-22">
              2016-09-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="分布式图片服务器"><a href="#分布式图片服务器" class="headerlink" title="分布式图片服务器"></a>分布式图片服务器</h2><p>大流量、高并发、海量存储<br>使用负载均衡和分布式存储，能够在已定成都上解决并发访问量高和存储量大的问题。</p>
<ol>
<li>用户上传图片到web服务器，web服务器处理完图片，然后再由前段web服务器把图片post到图片服务器中，图片服务器接收post过来的图片，然后把图片写入到本地磁盘并返回对应的成功状态码。前端web服务器根据返回状态码决定对应的操作，如果成功的话处理生成各个尺寸的缩略图/打水印，把图片服务器对应的ID和对应的图片路径写入DB数据库。</li>
<li>上传控制：只需要修改web服务器post到的目的图片服务器的ID就可以控制上传到哪台图片存储服务器，对应的图片存储服务器只需要安装nginx同时提供python或者php或者java服务并保存图片，也可以编写一个nginx扩展模块。</li>
<li>用户访问流程：用户访问页面的时候，根据请求图片的URL到对应的图片服务器访问图片<br><img src="http://oa4pac8sx.bkt.clouddn.com/%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A81.png" alt="enter image description here"><br>分布式存储的必要性：自动提供冗余，不需要我们去备份，担心数据安全，还有一点就是分布式存储动态扩容方便<br>上传和下载的分开处理：上传与下载分开，能保证不会因下载的压力影响图片的上传，而且还有一点，下载入口和上传入口的负载均衡策略也不同<br>使用cache做缓存: 分布式存储解决了存储安全问题，但性能问题还需要用cache去解决<br>使用一致性哈希做负载均衡<br>使用CDN分发和多域名访问入口: 采用多域名能够加快图片展示的速度<br><img src="http://oa4pac8sx.bkt.clouddn.com/%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A82.png" alt="enter image description here"><br>WEB 地图</li>
</ol>
<hr>
<p>1.分级<br>经过行业里的长期发展，业内逐渐采用了分级代替了比例尺，一般使用0~18这样得分级数表示。<br>级数每增加1级，那么比例尺实际是变大2倍。 这个分级数一般用z表示<br>现在业内流行的投影方式是谷歌发明的 web墨卡托</p>
<ol>
<li>分块<br>现在第0级是256<em>256的地图图片，当第1级的时候就是512</em>512，每一级变为2倍。这样当到18级的时候，整个地图的分辨率是个天文数字，这样任意一台计算机都无法在瞬间完成下载，读取和显示。<br>实际上把某一级地图 完整下载也是没有意义的，因为我们的屏幕分辨率有限，超出屏幕的范围图片都是浪费。</li>
<li>地图块的生成<br>电子地图的生成一般是地理几何数据（点，线，面）按照一定的规则， 配置不同的显示样式，预渲染成图片</li>
<li>矢量地图块<br>现在我们用的手机地图 和 运行在chrome浏览器的地图 基本都不是栅格图片形式了，而是一块块的矢量数据。</li>
</ol>
<h2 id="Leaflet"><a href="#Leaflet" class="headerlink" title="Leaflet"></a>Leaflet</h2><p>一个开源的JavaScript地图库，支持绘制矢量图层</p>
<p>矢量渲染对比栅格地图的好处，大概有以下几个方面：<br>数据更新更快更及时——由于地理数据是海量级别的，制作地图切片可能要消耗几个小时、几天甚至更长，而客户端矢量渲染理论上则可以支持实时更新。<br>释放客户端的缓存空间，节省流量——原来客户端需要缓存大量的地图切片，而矢量渲染则仅需要传输GeoJson字串，大大节省流量，这一点在移动端显得尤为重要。<br>客户端支持矢量编辑——以往，在客户端仅为图片展示，编辑数据是不可能的。</p>
<h2 id="GIS"><a href="#GIS" class="headerlink" title="GIS"></a>GIS</h2><p>1：数据库层次的<br>Oracle 11g R2 RAC环境进行简单介绍<br>RAC相关原理<br>数据存储<br>ArcSDE在该环境下的部署<br>请参考：<a href="http://blog.csdn.net/linghe301/article/details/12997803" target="_blank" rel="external">http://blog.csdn.net/linghe301/article/details/12997803</a></p>
<p>2：GIS服务器层次的<br>GIS服务器集群<br>请参考：<a href="http://blog.csdn.net/linghe301/article/details/13001035" target="_blank" rel="external">http://blog.csdn.net/linghe301/article/details/13001035</a><br>3：Web服务器层次的<br>负载均衡<br>WebAdapor<br>请参考：<a href="http://blog.csdn.net/linghe301/article/details/13001035" target="_blank" rel="external">http://blog.csdn.net/linghe301/article/details/13001035</a></p>
<p>4：数据安全方面的<br>反向代理<br>防火墙<br>DNS<br>请参考：<a href="http://blog.csdn.net/linghe301/article/details/13291855" target="_blank" rel="external">http://blog.csdn.net/linghe301/article/details/13291855</a><br><img src="http://oa4pac8sx.bkt.clouddn.com/GIS.png" alt="enter image description here"></p>
<h2 id="SWC"><a href="#SWC" class="headerlink" title="SWC"></a>SWC</h2><p>SWC File Format<br>The format of an SWC file is fairly simple. It is a text file consisting of a header with various fields beginning with a # character, and a series of three dimensional points containing an index, radius, type, and connectivity information. The lines in the text file representing points have the following layout.<br>n T x y z R P<br>n is an integer label that identifies the current point and increments by one from one line to the next.<br>T is an integer representing the type of neuronal segment, such as soma, axon, apical dendrite, etc. The standard accepted integer values are given below.<br>0 = undefined<br>1 = soma<br>2 = axon<br>3 = dendrite<br>4 = apical dendrite<br>5 = fork point<br>6 = end point<br>7 = custom<br>x, y, z gives the cartesian coordinates of each node.<br>R is the radius at that node.<br>P indicates the parent (the integer label) of the current point or -1 to indicate an origin (soma).<br>An example file generated by NeuronStudio containing just 8 points is shown below. Note that some of the fields of the header are missing values. At the time of this writing it is unclear whether this is allowed. NeuronStudio fills in SHRINKAGE_CORRECTION and SCALE with 1.0 in case a potential SWC reader uses these fields. </p>
<p>1 1 14.566132 34.873772 7.857000 0.717830 -1<br>2 0 16.022520 33.760513 7.047000 0.463378 1<br>3 5 17.542000 32.604973 6.885001 0.638007 2<br>4 0 19.163984 32.022469 5.913000 0.602284 3<br>5 0 20.448090 30.822802 4.860000 0.436025 4<br>6 6 21.897903 28.881084 3.402000 0.471886 5<br>7 0 18.461960 30.289471 8.586000 0.447463 3<br>8 6 19.420759 28.730757 9.558000 0.496217 7</p>
<h2 id="Neutube"><a href="#Neutube" class="headerlink" title="Neutube"></a>Neutube</h2><p>n  （Gn, Pn, Cn, Sn）, where （G n  xn, yn, zn, rn）<br>两个组件：SWC可视化和用户输入的响应，用户输入纠正识别错误。<br>3D视图是非常适合用于显示全球结构和2D视图提供密集的地方结构的精确推断<br>图像分析：该模块提供了一个神经元或神经元分支的自动跟踪，以允许用户获得神经元结构具有最小的相互作用。找到分支结点和端点。<br>软件结合2D / 3D可视化，半自动化的跟踪算法，以及灵活的编辑选项，以简化神经元的任务重建<br><img src="http://oa4pac8sx.bkt.clouddn.com/neutube.png" alt="enter image description here"></p>
<h2 id="Catmaid"><a href="#Catmaid" class="headerlink" title="Catmaid"></a>Catmaid</h2><p>CATMAID是图像的大量数据协作注释工具包。它被设计来导航，共享和协同注释生物标本的海量图像数据集。接口来源自GoogleMaps，同它的基本导航概念，增强，允许通过光学或物理切片显微技术获得的生物的三维图像数据的探索启发。该接口使地区的利益，通过书签，并通过多个已注册的数据集无缝共享同步导航。</p>
<p>随着大量的生物图像数据集是不切实际的创造一个可持续的集中存储库。 CATMAID的一个独特功能是它的半分布式体系结构，其中所呈现的图像数据可以驻留在任何互联网访问的服务器上，但可在中央数据库容易交叉引用。这样，没有图像数据被复制和数据生产者保持对他们的形象完全控制。</p>
<p>CATMAID是打算作为数据共享平台，采用高分辨率成像技术探测大样本生物学家。任何高通量，高含量成像项目如基因表达模式的屏幕将来自对数据共享和注解的接口中受益。</p>
<h2 id="DVID存在问题"><a href="#DVID存在问题" class="headerlink" title="DVID存在问题"></a>DVID存在问题</h2><p>图片保存在leveldb中，但是鉴于图片规模，数据库承载太多图片会导致数据库容量和效率成为极大的瓶颈。图片保存至硬盘，数据库中保存图片的存储路径。</p>
<p>图片写请求由用户发起后，通过负载均衡模块的过滤，首先来到应用服务器排队等待进入HDFS存储系统，通过NameNode分配DataNode进行存储，图片写入过程中先确定写入Block，再确定Sequence File，系统将二者的ID组合命名为图片的系统内的名称。图片元数据保存在HBase。<br>为了避免对hadoop的频繁读取，可以再web服务器前放一个squid进行对图片的缓存。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/9-20近期安排/" itemprop="url">
                  9.20近期安排
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-19T20:29:53+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>仔细浏览下面的技术资料，结合GIS和google、baidu地图服务中的图片服务器架构</p>
<p>基于DVID的大数据神经元重建系统</p>
<p>服务器端DVID存储大型多通道神经元图像数据及辅助类型，如多分辨率图像数据和神经元（SWC）模型数据等</p>
<p>网页客户端支持图像和模型数据的浏览 (参考neuTube）</p>
<p>计算服务系统支持自动分配计算资源对图像数据进行自动重建，产生神经元模型 （使用SPARK）</p>
<p>NeuTu客户端支持图像和模型数据的浏览，并对模型的数据进行修正。网页客户端也可支持部分修正功能。</p>
<p>SWC定义：<a href="http://research.mssm.edu/cnic/swc.html" target="_blank" rel="external">http://research.mssm.edu/cnic/swc.html</a></p>
<p>参考文献：</p>
<p>CATMAID</p>
<p>neuTube: <a href="http://eneuro.org/content/2/1/ENEURO.0049-14.2014" target="_blank" rel="external">http://eneuro.org/content/2/1/ENEURO.0049-14.2014</a></p>
<p>DVID-SPARK: <a href="https://github.com/janelia-flyem/DVIDSparkServices" target="_blank" rel="external">https://github.com/janelia-flyem/DVIDSparkServices</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://oa4pac8sx.bkt.clouddn.com/u=4284545010,775528643&fm=21&gp=0.jpg"
               alt="GBW" />
          <p class="site-author-name" itemprop="name">GBW</p>
          <p class="site-description motion-element" itemprop="description">Scala,Spark</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">35</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/GBWen" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.sina.com.cn/u/5660562931" target="_blank" title="曾经博客">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  曾经博客
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://user.qzone.qq.com/376366210" target="_blank" title="QQ空间">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  QQ空间
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/guan-bo-wen-98" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">GBW</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
